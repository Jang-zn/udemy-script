# Udemy 강의 대본 스크립트 스크래퍼 요구사항 정의서

## 1. 프로젝트 개요

### 1.1 프로젝트 목적
- [Udemy](https://www.udemy.com/) 플랫폼의 강의 영상에서 제공되는 자막/대본을 자동으로 스크래핑
- 섹션별, 강의별로 체계적으로 수집하여 Markdown 형식으로 통합 저장
- 기존 인프런 스크래퍼와 유사한 워크플로우 적용

### 1.2 기대 효과
- 강의 내용 복습 및 검색 용이성 향상
- 오프라인 학습 자료 확보
- 강의 내용 정리 및 노트 작성 시간 단축

## 2. 기능 요구사항

### 2.1 핵심 기능

#### 2.1.1 사용자 인증
- **로그인 처리**
  - Udemy 계정 이메일/비밀번호를 통한 자동 로그인
  - 2FA(Two-Factor Authentication) 지원 (선택사항)
  - 로그인 상태 유지 및 세션 관리
  - 로그인 실패 시 재시도 로직

#### 2.1.2 강의 탐색 및 선택
- **내 강의실 이동**
  - 로그인 후 "My learning" 페이지로 자동 이동
  - 구매/등록한 강의 목록 확인
- **강의 선택**
  - 사용자 지정 강의명으로 해당 강의 검색 및 선택
  - 강의 제목 부분 매칭 지원 (fuzzy matching)
  - 강의 썸네일 및 진도율 확인

#### 2.1.3 강의 구조 분석
- **섹션 및 강의 목록 파싱**
  - 강의 커리큘럼 구조 분석 (섹션 → 개별 강의)
  - 영상 강의와 비영상 콘텐츠 구분
  - 각 강의의 재생 시간 정보 수집
  - 강의 완료 상태 확인

#### 2.1.4 대본 스크래핑
- **자막/대본 추출**
  - 각 강의 영상의 자막 데이터 추출
  - 타임스탬프와 대본 텍스트 매핑
  - 다국어 자막 지원 (한국어, 영어 등)
  - 자동 생성 자막 vs 수동 작성 자막 구분
  
- **스크래핑 워크플로우**
  1. 첫 번째 섹션의 첫 번째 강의로 이동
  2. 영상 플레이어에서 자막 패널 활성화
  3. 자막 데이터 전체 로딩 (스크롤 또는 API 호출)
  4. 자막 내용 추출 및 저장
  5. 다음 강의로 이동 후 반복
  6. 섹션 완료 시 다음 섹션으로 이동

### 2.2 부가 기능

#### 2.2.1 진행 상황 모니터링
- 콘솔에 진행 상황 로그 출력
- 현재 처리 중인 섹션/강의 정보 표시
- 에러 발생 시 상세 로그 출력

## 3. 기술 요구사항

### 3.1 개발 환경
- **언어**: Python 3.8+
- **주요 라이브러리**:
  - `selenium`: 웹 브라우저 자동화
  - `webdriver-manager`: Chrome 드라이버 자동 관리
  - `beautifulsoup4`: HTML 파싱
  - `tkinter`: GUI 제공 (Python 기본 내장)
  - `python-dotenv`: 환경 변수 관리

### 3.2 브라우저 지원
- **Primary**: Google Chrome (최신 버전)
- **Secondary**: Microsoft Edge (Chromium 기반)
- Headless 모드 지원

### 3.3 플랫폼 호환성
- Windows 10/11
- macOS (Intel/Apple Silicon)
- Linux (Ubuntu 20.04+)

## 4. 사용자 인터페이스 요구사항

### 4.1 데스크톱 GUI (tkinter 기반)
```
┌─────────────────────────────────────┐
│        Udemy 강의 대본 스크래퍼        │
├─────────────────────────────────────┤
│                                     │
│ 이메일:     [____________________]  │
│ 비밀번호:   [____________________]  │
│ 강의명:     [____________________]  │
│                                     │
│        [스크립트 추출 시작]          │
│                                     │
│ 상태: 준비 완료                      │
└─────────────────────────────────────┘
```

### 4.2 GUI 특징
- **심플한 3필드 UI**: 이메일, 비밀번호, 강의명만 입력
- **자동 설정**: 저장 경로 자동 생성 (`output_udemy_scripts/`)
- **기본값 로딩**: `.env` 파일에서 이메일/비밀번호 자동 로드
- **상태 표시**: 하단에 간단한 진행 상태 메시지
- **키보드 지원**: Enter 키로 시작, Ctrl+V 붙여넣기

## 5. 데이터 구조 요구사항

### 5.1 출력 파일 구조
```
output_udemy_scripts/
└── [강의명]/
    ├── 섹션_1_[섹션제목]_total.md
    ├── 섹션_2_[섹션제목]_total.md
    └── ...
```

### 5.2 Markdown 파일 형식 (인프런과 동일)
```markdown
# 섹션 1: 섹션 제목

## 강의 1 - 강의 제목

**00:00:15**  
안녕하세요, 이번 강의에서는...

**00:00:32**  
첫 번째로 다룰 내용은...

## 강의 2 - 두 번째 강의 제목

**00:00:05**  
이전 강의에 이어서...
```

## 6. 에러 처리 및 복구 요구사항

### 6.1 일반적인 에러 처리
- **네트워크 연결 오류**: 재시도 로직 (최대 3회)
- **페이지 로딩 실패**: 대기 시간 증가 후 재시도
- **요소 찾기 실패**: 대체 선택자 사용
- **브라우저 크래시**: 자동 재시작

### 6.2 복구 메커니즘
- **중단점 저장**: 마지막 성공한 강의 정보 저장
- **재시작 기능**: 중단된 지점부터 이어서 실행
- **부분 파일 보존**: 섹션별로 파일 저장하여 부분 손실 방지

### 6.3 로깅 및 디버깅
- 상세한 실행 로그 기록
- 스크린샷 자동 저장 (오류 발생 시)
- 디버그 모드 제공

## 7. 스크래핑 제어 요구사항

### 7.1 속도 조정
- **강의 간 대기시간**: 1-3초 (설정 가능)
- **페이지 로딩 대기**: 최대 10초
- **자막 로딩 대기**: 2-5초 (동적 조정)
- **과부하 방지**: 연속 실패 시 대기시간 증가

### 7.2 진행 상황 모니터링
```
[섹션 3/10] Section 3: Advanced Topics
[강의 5/8] Lecture 5: Deep Learning Basics - 스크래핑 중...
자막 추출 완료: 45개 항목
다음 강의로 이동...
```

### 7.3 안정성
- 연속 실행 가능 (대용량 강의 대응)
- 브라우저 메모리 정리
- 실패 시 재시도 로직

## 8. 보안 및 정책 준수

### 8.1 기본 보안
- `.env` 파일로 인증 정보 관리
- 로그에 비밀번호 출력 금지
- 적절한 요청 간격 유지 (rate limiting)

## 9. 코드 구조

### 9.1 모듈 구성 (인프런과 동일)
```
udemy_scraper/
├── ui.py              # GUI (tkinter)
├── app.py             # 메인 워크플로우
├── auth.py            # Udemy 로그인
├── navigation.py      # 페이지 탐색
├── scraper.py         # 자막 추출
├── config.py          # 설정 관리
├── file_utils.py      # 파일 저장
└── requirements.txt
```

## 10. 설치 및 실행

```bash
# 1. 프로젝트 클론
git clone [repository_url]
cd udemy_script_scraper

# 2. 의존성 설치
pip install -r requirements.txt

# 3. 환경 설정 (선택사항)
cp .env.sample .env
# .env 파일에 기본 이메일/비밀번호 설정

# 4. 실행
python ui.py
```

## 11. 주요 고려사항

### 11.1 기술적 제약
- Udemy DRM 보호 콘텐츠는 스크래핑 불가
- 일부 강의는 프리미엄 계정만 자막 제공
- 브라우저 자동화 탐지 대응 필요

### 11.2 사용 제한
- **개인 학습 목적으로만 사용**
- 저작권 보호 콘텐츠 재배포 금지
- Udemy 이용약관 준수 필수

---

## 부록: 인프런 스크래퍼와의 차이점

| 구분 | 인프런 | Udemy |
|------|--------|-------|
| **UI** | tkinter 3필드 GUI | tkinter 3필드 GUI (동일) |
| **로그인** | 이메일/비밀번호 | 이메일/비밀번호 (+ 2FA 대응) |
| **강의 탐색** | '내 학습' → 강의 선택 | 'My learning' → 강의 선택 |
| **자막 접근** | 스크립트 탭 클릭 | CC(자막) 버튼 클릭 |
| **자막 형식** | data-index 기반 HTML | VTT/SRT 또는 JSON API |
| **언어 지원** | 주로 한국어 | 다국어 (한/영/기타) |
| **DRM** | 없음 | 일부 강의 DRM 적용 |
| **파일 저장** | `output_lecture_scripts/` | `output_udemy_scripts/` |

### 개발 우선순위
1. **1단계**: 기본 GUI + 로그인 + 강의 선택
2. **2단계**: 자막 접근 및 추출 로직 
3. **3단계**: 섹션별 반복 및 파일 저장
4. **4단계**: 에러 처리 및 안정성 개선

이 요구사항 정의서를 기반으로 단계별 개발을 진행하면 됩니다.
